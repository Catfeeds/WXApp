<!--index.wxml-->
<scroll-view scroll-y="true" style="height: 100%;">
<template name="no-goods">
	<view class="title-box">
		<image src="../../image/icon-cart.png"  background-size= "cover" class="cart-null"></image>
		<view>购物车空空如也</view>
	</view>
	<button class="to-index-btn" bindtap="toIndexPage">
           去逛逛
	</button>
</template>
<view class="cart-page">
	<template name="cart-page">
		<view class="list-group" wx:for="{{list}}" wx:for-item="items" wx:key="{{index}}">
			<view class="list-item">
				<view class="type-wrap">
					<label class="weui-cell weui-check__label">
						<view class="weui-cell__hd">
							<checkbox-group bindchange="checkboxChangeT" data-index="{{index}}">
								<checkbox value="{{items.p_category}}" checked="{{items.checked}}" data-index="{{index}}"/>
							</checkbox-group>
						</view>
						<view class="weui-cell__bd">{{items.p_category}}</view>
					</label>
				</view>
				<view class="type-li" wx:for="{{items.value}}" wx:for-item="childItem" wx:key="{{index}}">
					<view class="type-wrap-small">
						<label class="weui-cell weui-check__label">
							<view class="weui-cell__hd">
								<checkbox-group bindchange="checkboxChangeM" data-index="{{index}}" data-id="{{childItem.category}}" data-type="{{items.p_category}}">
									<checkbox value="{{childItem.category}}" checked="{{childItem.checked}}"/>
								</checkbox-group>
							</view>
							<view class="weui-cell__bd">{{childItem.category}}</view>
						</label>
					</view>
					<view class="list-info-item" wx:for="{{childItem.value}}" wx:for-item="lastChild" wx:key="{{index}}" data-id="{{lastChild.id}}" bindtap="selectTap" bindtouchstart="touchS" bindtouchmove="touchM" bindtouchend="touchE" data-index="{{index}}">
						<view class="cartInfo" style="{{lastChild.left}}">
							<label class="check__label_L">
								<checkbox-group bindchange="checkboxChangeB" data-index="{{index}}" data-id="{{lastChild.product_id}}" data-category="{{lastChild.product.category_id}}" data-cateType="{{items.p_category}}">
									<checkbox value="{{lastChild.product_id}}" class="checkbox_info" checked="{{lastChild.checked}}"/>
								</checkbox-group>
							</label>
							<view class="cartInfoR">
								<view class="productInfo">
									<text class="info-item">牌号：{{lastChild.product.name}}</text>
									<text class="info-item">包装：{{lastChild.packing}}</text>
								</view>
								<view class="numInfo">
									<view class="priceL">现汇价：<text class="active">￥{{lastChild.price}}</text></view>
									<view class="numR">
										<text class="btn minus {{disabledColor? 'disabled':''}}" bindtap="minusTap" data-id="{{lastChild.product_id}}" data-item="{{lastChild}}">-</text>
										<input type="number" class="buy-num" value="{{lastChild.amount}}" bindchange="getAmount" data-item="{{lastChild}}" />
										<text class="btn plus" bindtap="addTap" data-id="{{lastChild.product_id}}" data-item="{{lastChild}}">+</text>
										<text>吨</text>
									</view>
								</view>
							</view>
						</view>
						<view class="delete-btn" data-index="{{index}}" data-id="{{lastChild.id}}" data-pid="{{lastChild.product_id}}" catchtap="delItem">删除</view>
					</view>
				</view>
			</view>
		</view>
		<view class="weui-loadmore weui-loadmore_line" wx:if="{{isNoMore}}">
			<view class="weui-loadmore__tips weui-loadmore__tips_in-line">没有更多了</view>
		</view>
	</template>
</view>
<view class="count" wx:if="{{cartInfo.list.length > 0}}">
	<label>
		<view class="weui-cell__hd">
			<checkbox-group bindchange="checkboxChangeAll">
				<checkbox value="{{}}" class="allSelect" checked="{{allSelect}}"/>全选
			</checkbox-group>
		</view>
	</label>
	<view class="total">
		合计：<text class="active">￥{{totalPrice}}</text>
	</view>
	<view class="btnBuy" bindtap="btnBuy">立即下单</view>
</view>
<template is="{{cartInfo.list.length > 0 ? 'cart-page' : 'no-goods'}}" data="{{...cartInfo}}"></template>
</scroll-view>

		
	